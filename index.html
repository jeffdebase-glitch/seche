<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>SÃ¨che â€“ Jeff</title>

<style>
  body {
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", Arial, sans-serif;
    background: #f5f5f7;
    color: #111;
  }
  header {
    text-align: center;
    padding: 10px 0;
    font-size: 18px;
    font-weight: 600;
    background: #fff;
    position: sticky;
    top: 0;
    z-index: 10;
    border-bottom: 1px solid #ddd;
  }
  main { padding: 10px; max-width: 600px; margin: auto; }
  .btn {
    width: 48%;
    padding: 12px;
    margin: 1%;
    border-radius: 10px;
    border: 1px solid #d0d0d5;
    background: #fff;
    font-size: 15px;
    font-weight: 500;
  }
  .btn:active { background: #e5f0ff; border-color: #007aff; }
  .list-box {
    background: #fff;
    margin-top: 12px;
    border-radius: 10px;
    border: 1px solid #ddd;
    padding: 8px;
    max-height: 250px;
    overflow-y: auto;
  }
  .row {
    display: flex;
    justify-content: space-between;
    border-bottom: 1px solid #eee;
    padding: 4px 0;
    font-size: 14px;
  }
  .row:last-child { border-bottom: none; }
  .rmv {
    font-size: 12px;
    color: #ff3b30;
    cursor: pointer;
  }
  .total {
    margin-top: 10px;
    background: #fff;
    padding: 8px;
    border-radius: 10px;
    border: 1px solid #ddd;
    font-size: 14px;
  }
  textarea {
    margin-top: 10px;
    width: 100%;
    height: 110px;
    border-radius: 10px;
    border: 1px solid #bbb;
    padding: 8px;
    font-size: 13px;
  }
  #copyBtn {
    margin-top: 10px;
    padding: 12px;
    width: 100%;
    background: #007aff;
    color: #fff;
    border: none;
    border-radius: 12px;
    font-size: 15px;
  }
</style>
</head>

<body>
<header>SÃ¨che â€“ Jeff</header>

<main>
  <div id="buttons"></div>
  <div class="list-box" id="selected"></div>
  <div class="total" id="totals"></div>
  <textarea id="output" readonly onclick="this.select()"></textarea>
  <button id="copyBtn" onclick="copyText()">ðŸ“‹ Copier pour ChatGPT</button>
</main>

<script>
/* âš™ï¸ Base aliments (poids fixe ou portions iPhone) */
const items = {
  "ðŸ¥› Whey (1 cup)": { kcal: 110, prot: 20 },
  "ðŸ— Poulet 200g": { kcal: 330, prot: 62 },
  "ðŸ¥— Salade 200g": { kcal: 30, prot: 2 },
  "ðŸ§‚ Psyllium": { kcal: 30, prot: 0 },
  "ðŸ«’ 1 c.s huile": { kcal: 90, prot: 0 },
  "ðŸš¶  Trajet Salle (Aller)": { kcal: -80, prot: 0 },
  "ðŸš¶  Trajet Salle (Retour)": { kcal: -80, prot: 0 },
  "ðŸ”¥ Cardio 1h": { kcal: -520, prot: 0 }
};

/* ðŸ–±ï¸ GÃ©nÃ©ration des boutons */
function makeButtons() {
  let html = "";
  Object.keys(items).forEach(k => {
    html += `<button class="btn" onclick="addItem('${k}')">${k}</button>`;
  });
  document.getElementById("buttons").innerHTML = html;
}

/* âž• Ajouter aliment */
let list = [];
function addItem(name) {
  list.push(name);
  render();
}

/* âŒ Supprimer aliment */
function removeItem(i) {
  list.splice(i, 1);
  render();
}

/* ðŸ’¡ Mise Ã  jour display + totaux + texte export */
function render() {
  let html = "", kcal = 0, prot = 0;
  list.forEach((e,i) => {
    kcal += items[e].kcal;
    prot += items[e].prot;
    html += `<div class="row"><span>${e}</span><span class="rmv" onclick="removeItem(${i})">âœ–</span></div>`;
  });
  document.getElementById("selected").innerHTML = html;
  document.getElementById("totals").innerHTML = 
    `ðŸ”¢ Total: <b>${kcal} kcal</b> â€” ðŸ¥© <b>${prot} g prot</b>`;
  document.getElementById("output").value =
    `ðŸ“Œ EntrÃ©es du jour :\n${list.join("\n")}\n\nðŸ”¥ Total = ${kcal} kcal\nðŸ’ª ProtÃ©ines = ${prot} g`;
}

/* ðŸ“‹ Copier */
function copyText() {
  document.getElementById("output").select();
  document.execCommand("copy");
  alert("CopiÃ© !");
}

makeButtons(); render();
</script>

</body>
</html>
